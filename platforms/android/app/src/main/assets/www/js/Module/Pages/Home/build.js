define(["Store/Store","API/Search","API/Address"],()=>({viewModel:function(){const searchAPI=require("API/Search"),store=(require("API/Address"),require("Store/Store"));this.temp=new Array(10).fill(1),this.resultSearch=ko.observableArray([]);let page=0;window.temp=this,this.afterBinding=(()=>{cordova.plugins.firebase.messaging.requestPermission({forceShow:!0}).then(function(){console.log("You'll get foreground notifications when a push message arrives"),cordova.plugins.firebase.messaging.subscribe("Test")}).catch(e=>{console.log(e)}),$(window).on("scroll",function(){$(".app").height()<=$("html").scrollTop()+$(window).height()+1&&getStartPage(++page)})});let getStartPage=page=>{store.isShowLoading(!0),searchAPI.indexPage(page).then(res=>{console.log(res),this.resultSearch.push(...res.data.hits),store.isShowLoading(!1)}).catch(e=>{console.log(e),store.isShowLoading(!1)})};getStartPage(page),$(document).off("changeSearchResult"),$(document).on("changeSearchResult",(event,res)=>{this.resultSearch(res.data)})},template:'\n            <div id="home-page">\n    <com-slider></com-slider>\n    <com-headercontext></com-headercontext>\n    <div class="body-content">\n        <div class="filter">\n            <select name="city" disabled>\n                <option value="HCM" selected>Hồ Chí Minh</option>\n            </select>\n            <select name="type">\n                <option value="phong-tro">Phòng trọ</option>\n            </select>\n            <div class="dp-flex">\n                <select name="price-range">\n                    <option value="" selected>Khoảng giá</option>\n                    <option value="1">Dưới 500.000</option>\n                    <option value="2">500.000 - 1.000.000</option>\n                    <option value="3">1.000.000 - 2.000.000</option>\n                    <option value="4">2.000.000 - 5.000.000</option>\n                    <option value="5">Trên 5.000.000</option>\n                </select>\n                <select name="area">\n                    <option value="" selected>Diện tich</option>\n                    <option value="1">Dưới 20m²</option>\n                    <option value="1">Từ 20m² đên 40m²</option>\n                    <option value="1">Trên 40m²</option>\n                </select>\n            </div>\n        </div>\n        <div class="search-result">\n            \x3c!-- ko foreach: resultSearch --\x3e\n            <div class="search-item">\n                <div class="image-wrapper">\n                    <img data-bind="attr: {src: image ? image: \'./img/example.jpg\'}">\n                </div>\n                <div class="content-wrapper">\n                    <div class="content-title" data-bind="text: description"></div>\n                    <div class="content-bottom">\n                        <div class="content-price" data-bind="text: price"></div>\n                        <div class="content-description">\n                            <span>12 phút trước</span>\n                            <span data-bind="text: location" class="location"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>\n        '}));